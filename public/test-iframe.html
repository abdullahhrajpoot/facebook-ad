<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Iframe Embedding Test</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: #1a1a1a;
      color: #fff;
    }
    h1 { margin-bottom: 20px; }
    .info { 
      background: #2a2a2a; 
      padding: 15px; 
      border-radius: 8px; 
      margin-bottom: 20px;
    }
    iframe {
      width: 100%;
      height: 80vh;
      border: 2px solid #ef4444;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <h1>üß™ Iframe Embedding Test</h1>
  
  <div class="info">
    <p><strong>Instructions:</strong></p>
    <ol>
      <li>Run your app locally: <code>npm run dev</code></li>
      <li>Open this HTML file in a browser</li>
      <li>Check if the app loads correctly in the iframe below</li>
      <li>Open DevTools ‚Üí Network tab to verify headers</li>
      <li>Look for <code>Content-Security-Policy: frame-ancestors...</code></li>
    </ol>
  </div>
  
  <!-- Change this URL to match your deployed app URL for production testing -->
  <iframe 
    src="http://localhost:3000" 
    title="Embedded App"
    allow="storage-access"
  ></iframe>
  
  <script>
    // Listen for messages from the iframe
    window.addEventListener('message', (event) => {
      console.log('üì® Message from iframe:', event.data);
      
      // Handle auth request from iframe
      if (event.data?.type === 'IFRAME_AUTH_REQUEST') {
        console.log('üîê Iframe requested auth token');
        // In a real implementation, you would send the auth token here:
        // event.source.postMessage({
        //   type: 'IFRAME_AUTH_TOKEN',
        //   accessToken: 'your-access-token',
        //   refreshToken: 'your-refresh-token'
        // }, event.origin);
      }
      
      // Handle navigation from iframe
      if (event.data?.type === 'IFRAME_NAVIGATION') {
        console.log('üîó Iframe navigated to:', event.data.path);
      }
    });
  </script>
</body>
</html>
